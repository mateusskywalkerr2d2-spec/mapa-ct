<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Mapa de Cobertura LTE</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
        }
        #map {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>

<body>
    <div id="map"></div>

    <script>
        // Função para pegar parâmetros da URL
        function getParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Pegando parâmetros
        const imgUrl = getParam("img");
        const north = parseFloat(getParam("north"));
        const south = parseFloat(getParam("south"));
        const east  = parseFloat(getParam("east"));
        const west  = parseFloat(getParam("west"));

        // Criando mapa
        const map = L.map('map');

        // Base OpenStreetMap (gratuito)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // Se tiver dados válidos, cria overlay
        if (imgUrl && !isNaN(north) && !isNaN(south) && !isNaN(east) && !isNaN(west)) {

            const bounds = [[south, west], [north, east]];

            const overlay = L.imageOverlay(imgUrl, bounds, {
                opacity: 0.7
            }).addTo(map);

            map.fitBounds(bounds);
        } else {
            // fallback
            map.setView([-6.05, -50.17], 13);
        }
    </script>
</body>
</html>
